name: toc-generator

on:
  push:
    branches:
      - develop
  
jobs:
  generateTOC:
    name: TOC Generator
    runs-on: ubuntu-latest
    steps:
      - name: toc-generator
        uses: technote-space/toc-generator@v3
        with:
          FOLDING: true
          TOC_TITLE: "**目次**"
          COMMIT_MESSAGE: "Add or Update: toc-generatorによる目次自動作成\n#1"
          TARGET_PATHS: "**/*.md"

  slack-notify:
    if: always()
    needs: [generateTOC]
    name: workflow notification to slack
    runs-on: ubuntu-latest
    steps:
      - uses: Gamesight/slack-workflow-status@master
        with:
          repo_token: ${{ secrets.GITHUB_TOKEN }}
          slack_webhook_url: ${{ secrets.SLACK_WEBHOOK_URL }}
          name: 'The Result of Github Actions Workflow(kamimi01)'
          channel: '#experimental-station'
          icon_url: 'https://user-images.githubusercontent.com/47489629/104346721-16e1d200-5543-11eb-869f-80ac22ee4501.png'
          